# トラックボール基板スルーホール導通テスト手順

## セットアップ

1. **テストファームウェアのビルド**
   ```bash
   # テスト用オーバーレイを使用してビルド
   west build -p -b seeeduino_xiao_ble -- -DSHIELD=roBa_R -DOVERLAY_CONFIG=roBa_R_test.overlay -DKEYMAP_FILE=roBa_test.keymap
   ```

2. **ファームウェアの書き込み**
   - ビルドされたファームウェアを右側のSeeeduino XIAOに書き込む

## テスト方法

### 方法1: オシロスコープ/ロジックアナライザーを使用

1. **配線**
   - 8個の円形スルーホールにテストプローブを接続
   - Seeeduino XIAOのGPIOピン（D0-D8）から信号を出力

2. **テスト実行**
   - キーボードの1-8キーを押すと、対応するGPIOから信号を出力
   - どのスルーホールから信号が検出されるかを確認

### 方法2: LEDとテスターを使用した簡易テスト

1. **準備**
   - LED（抵抗付き）を各スルーホールに順番に接続
   - GNDはSeeeduino XIAOのGNDピンに接続

2. **テスト**
   - 各テストパターン（1-8キー）を押す
   - LEDが点灯するスルーホールを記録

## GPIOピン割り当て

| テストキー | GPIOピン | Seeeduino XIAO Pin |
|-----------|----------|-------------------|
| 1 | GPIO D0 | D0 |
| 2 | GPIO D1 | D1 |
| 3 | GPIO D2 | D2 |
| 4 | GPIO D3 | D3 |
| 5 | GPIO D4 | D4 |
| 6 | GPIO D5 | D5 |
| 7 | GPIO D6 | D6 |
| 8 | GPIO D7 | D7 |

## 予想される接続パターン

トラックボール基板の一般的な構成：
- **電源系**: 通常2-3個のスルーホールがVCC/GNDに接続
- **信号系**: SPI通信用（MISO/MOSI/SCK/CS）
- **割り込み**: MOTIONピン用
- **機械的支持**: 電気的に独立したスルーホール

## 結果の記録

テスト結果を以下の形式で記録：

```
スルーホール#1: GPIO D_ に接続 / 独立
スルーホール#2: GPIO D_ に接続 / 独立
スルーホール#3: GPIO D_ に接続 / 独立
スルーホール#4: GPIO D_ に接続 / 独立
スルーホール#5: GPIO D_ に接続 / 独立
スルーホール#6: GPIO D_ に接続 / 独立
スルーホール#7: GPIO D_ に接続 / 独立
スルーホール#8: GPIO D_ に接続 / 独立

導通グループ:
- グループ1: #_, #_, #_ (GND系)
- グループ2: #_, #_ (VCC系)
- 独立: #_, #_, #_
```

## 通常のファームウェアに戻す

テスト完了後：
```bash
west build -p -b seeeduino_xiao_ble -- -DSHIELD=roBa_R
```